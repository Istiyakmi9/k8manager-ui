<div class="container-fluid">
  <ng-container *ngIf="!isLoading">
    <div class="card p-4 shadow mt-4">
      <div class="col-md-12 d-flex align-items-center justify-content-between mb-3">
        <span *ngIf="currentPath != null" class="fw-bold text-dark fs-5">
          <i class="fa fa-folder"></i>
          {{folderDiscovery.FolderName}}
        </span>
        <div class="col-md-6 d-flex align-items-center justify-content-end">
          <div class="col-md-6">
            <input type="text" class="form-control" placeholder="Enter command" [(ngModel)]="command">
          </div>
          <div class="col-md-4 d-flex ms-2">
            <div class="form-check col-auto">
              <input class="form-check-input" type="radio" value="window" name="flexRadioDefault" selected id="flexRadioDefault1" [(ngModel)]="cmdType">
              <label class="form-check-label" for="flexRadioDefault1">
                Window
              </label>
            </div>
            <div class="form-check col-auto ms-2">
              <input class="form-check-input" type="radio" value="linux" name="flexRadioDefault" id="flexRadioDefault2" checked [(ngModel)]="cmdType">
              <label class="form-check-label" for="flexRadioDefault2">
                Linux
              </label>
            </div>
            <div class="form-check col-auto ms-2">
              <input class="form-check-input" type="radio" value="mickrok8" name="flexRadioDefault" id="flexRadioDefault2" checked [(ngModel)]="cmdType">
              <label class="form-check-label" for="flexRadioDefault2">
                MicroK8
              </label>
            </div>
          </div>
          <div class="col-auto">
            <button class="btn btn-outline-success ms-2" (click)="runCustomCommand()">Run Cmd</button>
          </div>
        </div>
        <!-- <div class="col-auto">
          <button class="btn btn-outline-primary" (click)="backToFolder()" [disabled]="currentPath === folderDiscovery.RootDirectory || folderDiscovery.RootDirectory == ''">
            <i class="fa fa-arrow-left pe-2"></i>
            Back
          </button>
          <button class="btn btn-outline-danger ms-3" (click)="loadData(folderDiscovery.RootDirectory)">
            <i class="fa fa-repeat pe-2"></i>
            Reset
          </button> -->
        <!-- </div> -->
      </div>
      <table class="table">
        <thead>
          <tr>
            <th width="15%">File Name</th>
            <th>Status</th>
            <th width="10%">Action</th>
          </tr>
        </thead>
        <tbody>
          <ng-container *ngIf="folderDiscovery.Files != null && folderDiscovery.Files.length > 0">
            <tr *ngFor="let item of folderDiscovery.Files">
              <td class="align-middle">
                <span class="badge text-bg-primary fw-normal fs-6">
                  <i class="fa fa-file-code-o pe-1" aria-hidden="true"></i>
                  {{item.FileName}}
                </span>
              </td>
              <td class="align-middle">
                <span class="badge text-bg-danger fw-normal fs-6">
                  Stopped
                </span>
              </td>
              <td class="align-middle">
                <div class="btn-group" role="group" aria-label="Basic outlined example">
                  <button type="button" (click)="runFile(item)" class="btn btn-outline-secondary" data-bs-toggle="tooltip" data-bs-placement="right" title="Run">
                    <i class="fa fa-play"></i>
                  </button>
                  <button type="button" class="btn btn-outline-secondary" (click)="checkServiceStatus()" data-bs-toggle="tooltip" data-bs-placement="right" title="Check latest status">
                    <i class="fa fa-cloud-download"></i>
                  </button>
                  <button type="button" (click)="reRunFile(item)" class="btn btn-outline-secondary" data-bs-toggle="tooltip" data-bs-placement="right" title="Re-Run">
                    <i class="fa fa-repeat"></i>
                  </button>
                  <button type="button" (click)="stopFile(item)" class="btn btn-outline-danger" data-bs-toggle="tooltip" data-bs-placement="right" title="Stop">
                    <i class="fa fa-close"></i>
                  </button>
                </div>
              </td>
            </tr>
          </ng-container>
          <ng-container *ngIf="folderDiscovery.Files != null && folderDiscovery.Files.length == 0">
            <tr>
              <td colspan="2" class="text-center fw-bold text-dark fs-5">No file present</td>
            </tr>
          </ng-container>
        </tbody>
      </table>
    </div>
  </ng-container>
  <ng-container *ngIf="isLoading">
    <div class="d-flex align-items-center justify-content-center vh-100 bg-success p-2  bg-opacity-10">
      <div class="spinner-grow" style="width: 3rem; height: 3rem;" role="status">
        <span class="sr-only">Loading...</span>
      </div>
    </div>
  </ng-container>
  <!-- <table class="table">
    <thead>
      <tr>
        <th >Status</th>
        <th>Pipeline</th>
        <th>Trigger</th>
        <th>Commit</th>
        <th>Stages</th>
        <th></th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let item of allPipeLine">
        <td>
          <span *ngIf="item.Status == 1" class="border border-success text-success rounded px-2 py-1">
            <i class="fa fa-check-circle-o pe-1"></i>
            passed
          </span>
          <span *ngIf="item.Status == 2" class="border border-danger text-danger rounded px-2 py-1">
            <i class="fa fa-times-circle-o pe-1"></i>
            failed
          </span>
          <span *ngIf="item.Status == 3" class="border border-primary text-primary rounded px-2 py-1">
            <i class="fa fa-circle-o-notch fa-spin fa-fw"></i>
            running
          </span>
          <span *ngIf="item.Status == 4" class="border border-warning text-warning rounded px-2 py-1">
            <i class="fa fa-exclamation-circle pe-1"></i>
            passed
          </span>
        </td>
        <td>
          {{item.PipelineId}}
        </td>
        <td>
          {{item.Trigger}}
        </td>
        <td>
          {{item.Commit}}
        </td>
        <td>
          <i class="fa fa-angle-double-right pe-1" aria-hidden="true"></i>
          <ng-container *ngFor="let stage of item.Stages">
            <i class="fa fa-lg fw-normal fa-check-circle-o px-1 text-success" *ngIf="stage == 1"></i>
            <i class="fa fa-lg fw-normal fa-times-circle-o px-1 text-danger" *ngIf="stage == 2"></i>
            <i class="fa fa-lg fw-normal fa-circle-o-notch fa-spin fa-fw px-1 text-primary" *ngIf="stage == 3"></i>
            <i class="fa fa-lg fw-normal fa-exclamation-circle text-warning px-1" *ngIf="stage == 4"></i>
          </ng-container>
          <i class="fa fa-angle-double-right ps-1" aria-hidden="true"></i>
        </td>
        <td class="text-muted text-end">
          <i class="fa fa-clock-o"></i> {{item.RunTime}}
          <p class="mb-0">
            <i class="fa fa-calendar"></i> {{item.UpdatedOn | date}}
          </p>
        </td>
        <td>
          <div class="btn-group" role="group" aria-label="Basic outlined example">
            <button type="button" class="btn btn-outline-secondary" data-bs-toggle="tooltip" data-bs-placement="right" title="Run">
              <i class="fa fa-play"></i>
            </button>
            <button type="button" class="btn btn-outline-secondary" data-bs-toggle="tooltip" data-bs-placement="right" title="View Code">
              <i class="fa fa-cloud-download"></i>
            </button>
            <button type="button" class="btn btn-outline-secondary" data-bs-toggle="tooltip" data-bs-placement="right" title="Re-Run">
              <i class="fa fa-repeat"></i>
            </button>
            <button type="button" class="btn btn-outline-danger" data-bs-toggle="tooltip" data-bs-placement="right" title="Stop">
              <i class="fa fa-close"></i>
            </button>
          </div>
        </td>
      </tr>
    </tbody>
  </table> -->
</div>
